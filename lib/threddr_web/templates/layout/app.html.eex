<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Threddr</title>
    <link rel="stylesheet" href="<%= Routes.static_path(@conn, "/css/app.css") %>"/>
  </head>
  <body>
    <nav class="navbar is-dark" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <span class="navbar-item">Threddr.io</span>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="<%= Routes.page_path(@conn, :index) %>">
            Home
          </a>

          <%= if @current_user do %>
            <a class="navbar-item">
              My Threads
            </a>
          <% end %>
        </div>

        <div class="navbar-end">
          <%= if @current_user do %>
            <div class="navbar-item">
              @<%= @current_user.username %>
            </div>
          <% end %>

          <div class="navbar-item">
            <%= if @current_user do %>
              <div class="buttons">
                <%= link("Log Out", to: "/auth/log-out", method: :delete, class: "button is-light") %>
              </div>
            <% else %>
              <div class="buttons">
                <%= link("Log In", to: "/auth/twitter", class: "button is-light") %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </nav>

    <section class="section">
      <div class="container">
        <%= if get_flash(@conn, :info) do %>
          <div class="notification is-success" role="alert"><%= get_flash(@conn, :info) %></div>
        <% end %>

        <%= if get_flash(@conn, :error) do %>
          <div class="notification is-danger" role="alert"><%= get_flash(@conn, :error) %></div>
        <% end %>

        <%= render @view_module, @view_template, assigns %>
      </div>
    </section>
    <script type="text/javascript" src="<%= Routes.static_path(@conn, "/js/app.js") %>"></script>
  </body>
</html>
